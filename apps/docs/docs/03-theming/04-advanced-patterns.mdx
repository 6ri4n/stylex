---
sidebar_position: 4
---

# Advanced Patterns

:::danger

Theming APIs for defining and overrideing CSS variables are experimental and
subject to change.

:::

The APIs for variables are designed to be simple and easy to use, but also
scalable to support complex use-cases.

Here are some things you can do with variables in StyleX that may not be
immediately obvious:

## Group your variables by type

StyleX enforces that you define your Variables as groups when using the
`createVars` function, but you can use the function multiple times to create
logical groups for your variables.

```tsx title="tokens.stylex.js"
import stylex from '@stylexjs/stylex';

// Variables for colors
export const colors = stylex.createVars({
  primaryText: 'black',
  secondaryText: '#333',
  accent: 'blue',
  background: 'white',
  lineColor: 'gray',
});

// Variables for spcaing
export const spacing = stylex.createVars({
  radiusSmall: '4px',
  radiusMedium: '8px',
  radiusLarge: '16px',
  small: '8px',
  medium: '16px',
  large: '24px',
});

export const typography = stylex.createVars({
  default: 'system-ui, sans-serif',
  mono: 'Menlo, monospace',
});
```

## Use variables as values for other variables

You can create variables whose default values are other variables.

```tsx title="heroTokens.stylex.js"
import stylex from '@stylexjs/stylex';
import {colors} from './tokens.stylex';

// A constant can be used to avoid repeating the media query
const DARK = '@media (prefers-color-scheme: dark)';

export const ctaColors = stylex.createVars({
  ctaButtonBackground: colors.accent,
  ctaButtonColor: colors.primaryText,
});
```

:::info

While you can do this an arbitary number of times, you cannot have circular
references. Most modern JS tooling disallows circular dependencies.

:::

## You can create a theme map to dynamically theme all or part of your app

You can create many different override providers for your variables and then
apply them conditionally and dynamically to different parts of your app to
enable custom themes.

```tsx title="color-themes.js"
import stylex from '@stylexjs/stylex';
import {colors} from './tokens.styles';

// A constant can be used to avoid repeating the media query
const DARK = '@media (prefers-color-scheme: dark)';

// Dracula theme
export const dracula = stylex.varsProvider(colors, {
  primaryText: {default: 'purple', [DARK]: 'lightpurple'},
  secondaryText: {default: 'pink', [DARK]: 'hotpink'},
  accent: 'red',
  background: {default: '#555', [DARK]: 'black'},
  lineColor: 'red',
});

// Ocean theme
export const ocean = stylex.varsProvider(colors, {
  primaryText: 'blue',
  secondaryText: 'lightblue',
  accent: 'green',
  background: 'white',
  lineColor: 'blue',
});

// Desert theme
export const desert = stylex.varsProvider(colors, {
  primaryText: 'yellow',
  secondaryText: 'orange',
  accent: 'brown',
  background: 'white',
  lineColor: 'yellow',
});
```

:::tip

**Note** how you can use media queries for some overrides and not others.

:::

You can then apply these themes conditionally. e.g. based on a `<select>` value.

```tsx title="App.tsx"
import stylex from '@stylexjs/stylex';
import * as colorThemes from './color-themes';

export function App({children}) {
  const [theme, setTheme] = useState('dracula');

  return (
    <div {...stylex.spread([colorThemes[theme]])}>
      <nav>
        <select value={theme} onChange={(e) => setTheme(e.target.value)}>
          {Object.keys(colorThemes).map((theme) => (
            <option value={theme}>{theme}</option>
          ))}
        </select>
      </nav>
      {children}
    </div>
  );
}
```
